<!DOCTYPE html>
<html lang="en" class="hide-scrollbar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hand & Foot Ultimate Scorer | Pro Card Game Tracker</title>
    
    <meta name="description" content="Pro-grade Hand and Foot card game scorecard. Track clean/dirty books, manage 2-5 teams, view round history, share wins, and read full game rules. Optimized for mobile PWA.">
    <meta name="keywords" content="Hand and Foot, card game scorer, card game rules, score tracker, clean book, dirty book, card game scoreboard">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#312e81">
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-YOUR_CLIENT_ID" crossorigin="anonymous"></script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script>tailwind.config = { darkMode: 'class' }</script>
    <style>
        body { -webkit-tap-highlight-color: transparent; scroll-behavior: smooth; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        input[type=number]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        .ad-padding { padding-bottom: 120px; }
        .prose h2 { font-weight: 900; font-style: italic; margin-top: 1.5rem; color: #4338ca; }
        .prose p { margin-bottom: 1rem; line-height: 1.6; }
        .animate-pop { animation: pop 0.3s ease-out; }
        @keyframes pop { 0% { transform: scale(0.95); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body class="bg-slate-100 dark:bg-slate-900 transition-colors duration-300">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const getSaved = (key, fallback) => {
            const saved = localStorage.getItem(key);
            try { return saved ? JSON.parse(saved) : fallback; } catch (e) { return fallback; }
        };

        const App = () => {
            const [view, setView] = useState('game');
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            const [darkMode, setDarkMode] = useState(() => getSaved('hf_darkMode', false));
            const [pointValues, setPointValues] = useState(() => getSaved('hf_basePoints', { clean: 500, dirty: 300, outBonus: 100, dealBonus: 100 }));
            const [history, setHistory] = useState(() => getSaved('hf_history', []));
            const [winningTeamId, setWinningTeamId] = useState(null);
            const [teams, setTeams] = useState(() => getSaved('hf_teams', [
                { id: 1, name: 'Team 1', clean: 0, dirty: 0, cards: 0, perfectDeal: false },
                { id: 2, name: 'Team 2', clean: 0, dirty: 0, cards: 0, perfectDeal: false },
            ]));

            useEffect(() => {
                localStorage.setItem('hf_darkMode', JSON.stringify(darkMode));
                localStorage.setItem('hf_history', JSON.stringify(history));
                localStorage.setItem('hf_teams', JSON.stringify(teams));
                localStorage.setItem('hf_basePoints', JSON.stringify(pointValues));
                document.documentElement.classList.toggle('dark', darkMode);
                try { (window.adsbygoogle = window.adsbygoogle || []).push({}); } catch (e) {}
            }, [darkMode, history, teams, pointValues]);

            const updateTeamCount = (count) => {
                const newCount = Math.max(2, Math.min(5, count));
                if (newCount > teams.length) {
                    const added = [];
                    for (let i = teams.length + 1; i <= newCount; i++) {
                        added.push({ id: i, name: `Team ${i}`, clean: 0, dirty: 0, cards: 0, perfectDeal: false });
                    }
                    setTeams([...teams, ...added]);
                } else if (newCount < teams.length) {
                    if (confirm("Delete the last team's data?")) setTeams(teams.slice(0, newCount));
                }
            };

            const calculateTeamRound = (team) => {
                let score = (Number(team.clean) * pointValues.clean) + 
                            (Number(team.dirty) * pointValues.dirty) + 
                            (Number(team.cards) || 0);
                if (winningTeamId === team.id) score += pointValues.outBonus;
                if (team.perfectDeal) score += pointValues.dealBonus;
                return score;
            };

            const getGrandTotal = (teamName) => {
                return history.reduce((sum, round) => {
                    const teamData = round.data.find(d => d.name === teamName);
                    return sum + (teamData ? teamData.score : 0);
                }, 0);
            };

            const saveRound = () => {
                const roundData = teams.map(t => ({ name: t.name, score: calculateTeamRound(t) }));
                setHistory([...history, { round: history.length + 1, data: roundData }]);
                setTeams(teams.map(t => ({ ...t, clean: 0, dirty: 0, cards: 0, perfectDeal: false })));
                setWinningTeamId(null);
                window.scrollTo(0,0);
            };

            const shareResults = async () => {
                const standings = teams.map(t => `${t.name}: ${getGrandTotal(t.name).toLocaleString()}`).join('\n');
                const text = `üèÜ Hand & Foot Standings\n\n${standings}\n\nTracked with Hand & Foot Ultimate.`;
                if (navigator.share) { try { await navigator.share({ title: 'Game Results', text }); } catch (e) {} }
                else { alert('Results copied to clipboard!'); navigator.clipboard.writeText(text); }
            };

            return (
                <div className="min-h-screen flex flex-col font-sans ad-padding">
                    <header className="bg-indigo-900 text-white p-5 flex justify-between items-center sticky top-0 z-50 shadow-lg">
                        <button onClick={() => setIsMenuOpen(true)} className="text-2xl p-2">‚ò∞</button>
                        <h1 className="font-black italic text-xs tracking-[0.3em] cursor-pointer" onClick={() => setView('game')}>HAND & FOOT</h1>
                        <button onClick={shareResults} className="p-2 text-xl">üì§</button>
                    </header>

                    {isMenuOpen && (
                        <div className="fixed inset-0 z-[100] flex">
                            <div className="bg-white dark:bg-slate-900 w-72 h-full shadow-2xl p-8 flex flex-col space-y-6 overflow-y-auto">
                                <button onClick={() => setIsMenuOpen(false)} className="text-slate-400 font-black text-left uppercase text-[10px]">‚úï Close Menu</button>
                                <nav className="flex flex-col space-y-5 font-black text-lg dark:text-white italic">
                                    <button onClick={() => { setView('game'); setIsMenuOpen(false); }}>üéÆ SCORER</button>
                                    <button onClick={() => { setView('history'); setIsMenuOpen(false); }}>üìä HISTORY</button>
                                    <button onClick={() => { setView('rules'); setIsMenuOpen(false); }}>üìú HOW TO PLAY</button>
                                    <button onClick={() => { setView('settings'); setIsMenuOpen(false); }}>‚öôÔ∏è SETTINGS</button>
                                </nav>
                                <div className="pt-10 border-t dark:border-slate-800 flex flex-col space-y-3 text-[10px] font-bold text-slate-400 uppercase tracking-widest">
                                    <button onClick={() => { setView('privacy'); setIsMenuOpen(false); }}>Privacy Policy</button>
                                    <button onClick={() => { setView('terms'); setIsMenuOpen(false); }}>Terms of Service</button>
                                    <button onClick={() => { setView('about'); setIsMenuOpen(false); }}>About Application</button>
                                </div>
                            </div>
                            <div className="flex-1 bg-black/60 backdrop-blur-sm" onClick={() => setIsMenuOpen(false)}></div>
                        </div>
                    )}

                    <main className="flex-1 max-w-lg mx-auto w-full p-4">
                        {view === 'game' && (
                            <div className="space-y-4 animate-pop">
                                <div className="bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-md border-b-4 border-indigo-500">
                                    <h2 className="text-[10px] font-black text-slate-400 uppercase mb-3 text-center tracking-widest">Global Standings</h2>
                                    {teams.map(t => (
                                        <div key={t.id} className="flex justify-between items-center mb-2 border-b border-slate-50 dark:border-slate-700 pb-1">
                                            <span className="dark:text-white font-bold">{t.name}</span>
                                            <div className="font-black text-indigo-600 dark:text-indigo-400 text-lg">{getGrandTotal(t.name).toLocaleString()}</div>
                                        </div>
                                    ))}
                                </div>
                                {teams.map((team, idx) => (
                                    <div key={team.id} className="bg-white dark:bg-slate-800 p-4 rounded-2xl border dark:border-slate-700 shadow-sm">
                                        <div className="flex justify-between items-center mb-4">
                                            <input className="bg-transparent font-black text-slate-800 dark:text-white w-1/2 outline-none border-b border-transparent focus:border-indigo-500" value={team.name} onChange={(e) => {
                                                const nt = [...teams]; nt[idx].name = e.target.value; setTeams(nt);
                                            }} />
                                            <div className="flex gap-2">
                                                <button onClick={() => {
                                                    const nt = [...teams]; nt[idx].perfectDeal = !nt[idx].perfectDeal; setTeams(nt);
                                                }} className={`text-[9px] px-3 py-1.5 rounded-full font-black ${team.perfectDeal ? 'bg-indigo-500 text-white' : 'bg-slate-100 dark:bg-slate-700 text-slate-400'}`}>24 PULL</button>
                                                <button onClick={() => setWinningTeamId(team.id === winningTeamId ? null : team.id)} className={`text-[9px] px-3 py-1.5 rounded-full font-black ${winningTeamId === team.id ? 'bg-green-500 text-white' : 'bg-slate-100 dark:bg-slate-700 text-slate-400'}`}>OUT</button>
                                            </div>
                                        </div>
                                        <div className="grid grid-cols-2 gap-3">
                                            <div className="space-y-1">
                                                <label className="text-[9px] font-bold text-slate-400 uppercase italic">Clean (√ó{pointValues.clean})</label>
                                                <input type="number" inputMode="numeric" className="w-full p-3 rounded-xl bg-slate-50 dark:bg-slate-900 dark:text-white outline-none focus:ring-2 ring-indigo-500" value={team.clean || ''} onChange={(e) => { const nt = [...teams]; nt[idx].clean = e.target.value; setTeams(nt); }} placeholder="0" />
                                            </div>
                                            <div className="space-y-1">
                                                <label className="text-[9px] font-bold text-slate-400 uppercase italic">Dirty (√ó{pointValues.dirty})</label>
                                                <input type="number" inputMode="numeric" className="w-full p-3 rounded-xl bg-slate-50 dark:bg-slate-900 dark:text-white outline-none focus:ring-2 ring-indigo-500" value={team.dirty || ''} onChange={(e) => { const nt = [...teams]; nt[idx].dirty = e.target.value; setTeams(nt); }} placeholder="0" />
                                            </div>
                                            <div className="space-y-1 col-span-2">
                                                <label className="text-[9px] font-bold text-slate-400 uppercase italic">Card Count Sum</label>
                                                <input type="number" inputMode="numeric" className="w-full p-3 rounded-xl bg-slate-50 dark:bg-slate-900 dark:text-white outline-none focus:ring-2 ring-indigo-500" value={team.cards || ''} onChange={(e) => { const nt = [...teams]; nt[idx].cards = e.target.value; setTeams(nt); }} placeholder="Face Value" />
                                            </div>
                                        </div>
                                    </div>
                                ))}
                                <button onClick={saveRound} className="w-full bg-indigo-600 text-white font-black py-5 rounded-2xl shadow-xl active:scale-95 transition-transform">SAVE ROUND {history.length + 1}</button>
                            </div>
                        )}

                        {view === 'rules' && (
                            <div className="prose dark:text-slate-300 pb-10 animate-pop">
                                <h1 className="text-3xl font-black italic dark:text-white mb-6">How to Play Hand & Foot</h1>
                                
                                <p>Hand and Foot is a multi-deck Canasta variant played with teams. It is known for its depth and long-form gameplay consisting of 4 distinct rounds.</p>
                                
                                <h2>The Objective</h2>
                                <p>Score points by building melds and completing books of 7 cards. You must play all cards in your "Hand" to access your "Foot," and clear both to end the round.</p>
                                
                                <h2>The Perfect Deal</h2>
                                <p>Each player attempts to pull 24 cards from the deck in one motion. If they pull exactly 13 for their Hand and 11 for their Foot (or just 24 total), they earn a <strong>100 point bonus</strong>. Excess cards are returned; deficient pulls are topped up.</p>
                                
                                <h2>Melds and Books</h2>
                                <ul className="list-disc ml-5 mb-4">
                                    <li><strong>Clean Book:</strong> 7 cards of same rank, no wilds (500 pts).</li>
                                    <li><strong>Dirty Book:</strong> 7 cards of same rank, 1-2 wilds (300 pts).</li>
                                </ul>
                                
                                <h2>Card Point Values</h2>
                                
                                <ul className="list-disc ml-5 mb-4">
                                    <li>Wilds (Jokers/2s): 50/20 pts</li>
                                    <li>Aces: 20 pts | 8-K: 10 pts | 4-7: 5 pts</li>
                                    <li>Red 3s: 100 pts</li>
                                </ul>

                                <h2>Winning Requirements</h2>
                                <p>To "Go Out," your team needs at least one clean and one dirty book. The round ends when a player clears their Foot. All other teams count the cards remaining in their hands as negative points.</p>
                                <button onClick={() => setView('game')} className="w-full py-4 mt-6 bg-indigo-600 text-white rounded-xl font-bold">Back to Scorer</button>
                            </div>
                        )}

                        {view === 'history' && (
                            <div className="space-y-4 animate-pop">
                                <h2 className="text-xl font-black italic dark:text-white uppercase tracking-tighter">Round History</h2>
                                {history.length === 0 ? (
                                    <div className="text-center py-20 text-slate-400 italic border-2 border-dashed rounded-2xl dark:border-slate-700">No rounds recorded yet.</div>
                                ) : (
                                    history.map((h, i) => (
                                        <div key={i} className="bg-white dark:bg-slate-800 p-4 rounded-2xl border dark:border-slate-700 shadow-sm">
                                            <div className="text-[10px] font-black text-indigo-500 uppercase mb-2">Round {h.round}</div>
                                            {h.data.map((d, idx) => (
                                                <div key={idx} className="flex justify-between text-sm py-1 border-b border-slate-50 dark:border-slate-700 last:border-0">
                                                    <span className="dark:text-slate-300 font-bold">{d.name}</span>
                                                    <span className="font-black dark:text-white">{d.score.toLocaleString()}</span>
                                                </div>
                                            ))}
                                        </div>
                                    )).reverse()
                                )}
                            </div>
                        )}

                        {view === 'privacy' && (
                            <div className="prose dark:text-slate-300 pb-10 text-xs">
                                <h1 className="text-xl font-black dark:text-white mb-4 uppercase">Privacy Policy</h1>
                                <p><strong>Last Updated: Feb 2026</strong></p>
                                <p>Hand & Foot Ultimate Scorer operates as a client-side application. We do not store, transmit, or share your game data with external servers. All information is held in your browser's local cache.</p>
                                <h2>Data Collection</h2>
                                <p>We do not collect personal data. However, we use Google AdSense which utilizes cookies to improve your experience and show relevant advertisements.</p>
                                <button onClick={() => setView('game')} className="mt-6 text-indigo-500 font-bold">Return to App</button>
                            </div>
                        )}

                        {view === 'terms' && (
                            <div className="prose dark:text-slate-300 pb-10 text-xs">
                                <h1 className="text-xl font-black dark:text-white mb-4 uppercase">Terms of Service</h1>
                                <p>By using this tool, you agree that it is provided "as is" for entertainment purposes. We are not responsible for disagreements caused by card game scoring errors or data loss due to browser cache clearing.</p>
                                <button onClick={() => setView('game')} className="mt-6 text-indigo-500 font-bold">Return to App</button>
                            </div>
                        )}

                        {view === 'about' && (
                            <div className="prose dark:text-slate-300 pb-10">
                                <h1 className="text-2xl font-black dark:text-white mb-4 italic">About the App</h1>
                                <p>Hand & Foot Ultimate was designed to replace messy paper scoring. Our mission is to provide card enthusiasts with a clean, fast, and reliable way to track complex games without the math headaches.</p>
                                <p>Developed with modern web technologies for maximum performance and offline capabilities.</p>
                                <button onClick={() => setView('game')} className="mt-6 text-indigo-500 font-bold underline">Start Game</button>
                            </div>
                        )}

                        {view === 'settings' && (
                            <div className="space-y-6 dark:text-white animate-pop">
                                <h2 className="text-xl font-black italic uppercase">Settings</h2>
                                <div className="bg-white dark:bg-slate-800 p-5 rounded-2xl space-y-6">
                                    <div className="flex justify-between items-center">
                                        <label className="font-bold text-xs uppercase text-slate-500 tracking-widest text-left">Active Teams (2-5)</label>
                                        <div className="flex items-center gap-4 bg-slate-100 dark:bg-slate-900 rounded-xl p-1">
                                            <button onClick={() => updateTeamCount(teams.length - 1)} className="w-10 h-10 font-bold text-xl text-indigo-500">-</button>
                                            <span className="font-black text-indigo-500">{teams.length}</span>
                                            <button onClick={() => updateTeamCount(teams.length + 1)} className="w-10 h-10 font-bold text-xl text-indigo-500">+</button>
                                        </div>
                                    </div>
                                    <div className="pt-4 border-t dark:border-slate-700 space-y-4">
                                        <button onClick={() => setDarkMode(!darkMode)} className="w-full py-3 bg-indigo-500 text-white rounded-xl font-bold uppercase text-xs tracking-widest">Toggle {darkMode ? 'Light' : 'Dark'} Mode</button>
                                        <button onClick={() => { if(confirm("Erase all data?")) { setHistory([]); setView('game'); } }} className="w-full py-3 text-red-500 border border-red-500/20 rounded-xl font-black text-xs">RESET GAME</button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>

                    <div className="fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-slate-900 border-t dark:border-slate-800 min-h-[60px]">
                        <div className="max-w-lg mx-auto text-center py-2 px-1">
                            <ins className="adsbygoogle"
                                 style={{ display: 'block' }}
                                 data-ad-client="ca-pub-YOUR_CLIENT_ID"
                                 data-ad-slot="YOUR_AD_SLOT"
                                 data-ad-format="horizontal"
                                 data-full-width-responsive="true"></ins>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js').catch(() => {});
            });
        }
    </script>
</body>
</html>
